---
title: "[í•­í•´] í•­í•´ ì‹¬í™” ì£¼ì°¨ - 6"
description: "Layered Architecture Pattern"
language: "daliyreport"
category: "Hanghae99"
update: "2023-03-11"
serisenumber: 22
---

## Layered Architecture Pattern

### ë„ë©”ì¸
- ê°œë°œì ëŒ€ë¶€ë¶„ì€ ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°œì„ í•˜ê±°ë‚˜ ìë™í™”í•˜ê¸° ìœ„í•´ ì¼í•œë‹¤. ë„ë©”ì¸ì€ ì´ëŸ° í”„ë¡œì„¸ìŠ¤ê°€ ì§€ì›í•˜ëŠ” í™œë™ì„ ì˜ë¯¸í•œë‹¤.
- ê°€êµ¬ íŒë§¤ íšŒì‚¬ì˜ ë„ë©”ì¸ì€ êµ¬ë§¤ ë° ì¡°ë‹¬, ì œí’ˆ ì„¤ê³„, ë¬¼ë¥˜ ë° ë°°ë‹¬ ë“± ë‹¤ë¥¸ ë¶„ì•¼ë¥¼ ëœ»í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ë„ë©”ì¸ (Domain)ì˜ ì˜ˆì‹œ**

- ê°œë°œì ì…ì¥ì—ì„œ ì˜¨ë¼ì¸ ì„œì ì„ êµ¬í˜„í•´ì•¼ í•  **ì†Œí”„íŠ¸ì›¨ì–´ì˜ ëŒ€ìƒ**ì´ ë©ë‹ˆë‹¤.
    - **ì˜¨ë¼ì¸ ì„œì ** = ì†Œí”„íŠ¸ì›¨ì–´ë¡œ í•´ê²°í•˜ê³ ì í•˜ëŠ” **ë¬¸ì œì˜ ì˜ì—­** = **ë„ë©”ì¸ (Domain)**
- í•œ **ë„ë©”ì¸**ì€ ë‹¤ì‹œ **í•˜ìœ„ ë„ë©”ì¸**ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - **ë„ë©”ì¸ êµ¬ì„±** : ì£¼ë¬¸, íšŒì›, í˜œíƒ, ê²°ì œ, ë°°ì†¡, ì •ì‚°, ì¹´íƒˆë¡œê·¸, ë¦¬ë·°
    - **í•˜ìœ„ ë„ë©”ì¸**ì€ **ë‹¤ë¥¸** í•˜ìœ„ ë„ë©”ì¸ê³¼ **ì—°ë™**í•˜ì—¬ ì™„ì „í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
        - ex) ê³ ê° â†’ ë¬¼ê±´ ì£¼ë¬¸ â†’ ê²°ì œ â†’ ë°°ì†¡ â†’ í˜œíƒ ì œê³µ
- **í•˜ìœ„ ë„ë©”ì¸**ì„ ì–´ë–»ê²Œ êµ¬ì„±í•  ì§€ ì—¬ë¶€ëŠ” ìƒí™©ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.
    - **B2B**(Business-to-Business), **B2C**(Business to Consumer)

### ë„ë©”ì¸ ëª¨ë¸
- **ë„ë©”ì¸ ëª¨ë¸**ì´ë€ ìœ ìš©í•œ íŠ¹ì„±ì„ í¬í•¨í•˜ëŠ” **í”„ë¡œì„¸ìŠ¤**ë‚˜ í˜„ìƒì˜ **ì§€ë„**(Map)ë¥¼ ëœ»í•©ë‹ˆë‹¤. **ë„ë©”ì¸ ëª¨ë¸**ì€ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ìˆ˜í–‰í•  ì‚¬ëŒì´ ìì‹ ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ì— ëŒ€í•´ **ë§ˆìŒì†ì— ê°€ì§€ê³  ìˆëŠ” ì§€ë„**ì™€ ê°™ìŠµë‹ˆë‹¤.

- **ë„ë©”ì¸ ëª¨ë¸**ì´ë€ íŠ¹ì • ë„ë©”ì¸ì„ **ê°œë…ì ìœ¼ë¡œ ì •ë¦¬**í•œ ëª¨ë¸ì…ë‹ˆë‹¤.
- **ë„ë©”ì¸ ëª¨ë¸**ì€ ì‚¬ìš©í•  ê°œì²´ë¥¼ ê¸°ì–µí•˜ê¸° ì‰¬ìš´ ì´ë¦„(**ì‹ë³„ì**)ì„ ë¶€ì—¬í•´ **ëŒ€ìƒì„ ì‰½ê²Œ ê³µìœ **í•  ìˆ˜ ìˆê²Œ í•œë‹¤.
- ë§Œì•½ ëˆ„êµ°ê°€ê°€ ì €í¬ì—ê²Œ ê³µì„ ë˜ì§„ë‹¤ë©´ ìš°ë¦¬ëŠ” **ë¬´ì˜ì‹ì **ìœ¼ë¡œ ì´ ê³µì˜ ì›€ì§ì„ì„ **ì˜ˆì¸¡**í•´ íšŒí”¼í•  ê²ƒì…ë‹ˆë‹¤.
    - ìš°ë¦¬ë“¤ì˜ ë¨¸ë¦¿ì†ì— ì´ë¯¸ ê³µê°„ìƒ ë¬¼ì²´ê°€ **ì›€ì§ì´ëŠ” ë°©ì‹ì— ëŒ€í•œ ëª¨ë¸**ì´ ìˆì–´ì„œ ì›€ì§ì„ì„ ë¬´ì˜ì‹ì ìœ¼ë¡œ **ì˜ˆì¸¡**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ë„ë©”ì¸ ëª¨ë¸ë§ (Domain Modeling)ì˜ ì¢…ë¥˜**

1. **ì—”í‹°í‹° (Entity)**
2. **ê°’ ê°ì²´ (Value object)**
3. **ë„ë©”ì¸ ì„œë¹„ìŠ¤ (Domain service)**

#### ì—”í‹°í‹°
- ì—”í‹°í‹°(Entity)ëŠ” ì‹¤ì œ DB í…Œì´ë¸”ê³¼ ì—°ê´€ë˜ì–´ ìˆëŠ” í•µì‹¬ í´ë˜ìŠ¤ì´ê³ , ì—”í‹°í‹°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í…Œì´ë¸”ì´ ìƒì„±ë˜ê³  DB ìŠ¤í‚¤ë§ˆê°€ ë³€ê²½ë©ë‹ˆë‹¤.  
ex) Sequelize Models

- **ì—”í‹°í‹°**ë¥¼ **ìš”ì²­(Request)**ì´ë‚˜ **ì‘ë‹µê°’(Response)**ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” í´ë˜ìŠ¤ë¡œ ì‚¬ìš©í•˜ë©´ ì•ˆë©ë‹ˆë‹¤.
- **ì—”í‹°í‹°** **ë‚´ë¶€ì˜ ì†ì„±**ì´ **ë³€ê²½**ë˜ë”ë¼ë„ ì—¬ì „íˆ **ë™ì¼í•œ ì—”í‹°í‹°**ë¡œ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤.
- **ì—”í‹°í‹°**ëŠ” ì‹œê°„ì— ë”°ë¼ **ë³€í•˜ëŠ” ì†ì„±**ì´ **í¬í•¨**ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì–´ë–¤ ìš”ì†Œê°€ **ì—”í‹°í‹°**ë¥¼ **ìœ ì¼í•˜ê²Œ ì‹ë³„**í•˜ëŠ”ì§€ **ì •ì˜**í•˜ëŠ” ê²ƒ ë˜í•œ ì¤‘ìš”í•©ë‹ˆë‹¤.
    - ë³´í†µ ì´ë¦„ì´ë‚˜ ì°¸ì¡° ë²ˆí˜¸ ë“±ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
    - ex) `User` í´ë˜ìŠ¤ì˜ `userId`

### ì•„í‚¤í…ì²˜ íŒ¨í„´
- ì•„í‚¤í…ì²˜ íŒ¨í„´ì€ ì†Œí”„íŠ¸ì›¨ì–´ì˜ êµ¬ì¡°ë¥¼ êµ¬ì„±í•˜ê¸°ìœ„í•œ ê°€ì¥ ê¸°ë³¸ì ì¸ í† ëŒ€ë¥¼ ì œì‹œí•©ë‹ˆë‹¤.
- **ì•„í‚¤í…ì²˜ íŒ¨í„´**ì€ ê°ê°ì˜ **ì‹œìŠ¤í…œ**ë“¤ê³¼ ê·¸ **ì—­í• **ì´ ì •ì˜ë˜ì–´ ìˆê³ , ì—¬ëŸ¬ ì‹œìŠ¤í…œ ì‚¬ì´ì˜ **ê´€ê³„**ì™€ **ê·œì¹™** ë“±ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- ê²€ì¦ëœ êµ¬ì¡°ë¡œ ê°œë°œì„ ì§„í–‰í•˜ê¸° ë•Œë¬¸ì— **ì•ˆì •ì ì¸ ê°œë°œ**ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ì•„í‚¤í…ì²˜ íŒ¨í„´ì„ ë„ì…í•  ê²½ìš° ë„ë©”ì¸ì´ **ë³µì¡**í• ìˆ˜ë¡ **ëª¨ë¸**ì´ë‚˜ **ì½”ë“œ**ë¥¼ ë” ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ëŠ” ì¸¡ë©´ì—ì„œ **í° ì´ìµ**ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ëŒ€í‘œì ì¸ ì•„í‚¤í…ì²˜ íŒ¨í„´**

- **ì €ì¥ì†Œ íŒ¨í„´ (Repository pattern)**
    - **ì˜ì†ì ì¸ ì €ì¥ì†Œ**ì— ëŒ€í•œ **ì¶”ìƒí™”**
- **ì„œë¹„ìŠ¤ ê³„ì¸µ íŒ¨í„´ (Service layer pattern)**
    - ìœ ìŠ¤ ì¼€ì´ìŠ¤(Usecase)ì˜ **ì‹œì‘**ê³¼ **ë**ì„ ëª…í™•í•˜ê²Œ ì •ì˜í•˜ê¸° ìœ„í•œ íŒ¨í„´
- **ì‘ì—… ë‹¨ìœ„ íŒ¨í„´ (Unit of work pattern)**
    - ì›ìì  ì—°ì‚°ì„ ì œê³µí•©ë‹ˆë‹¤.
- **ì• ê·¸ë¦¬ê²Œì´íŠ¸ íŒ¨í„´ (Aggregate pattern)**
    - ë°ì´í„° ì •í•©ì„±ì„ ê°•í™”í•˜ê¸° ìœ„í•œ íŒ¨í„´

- ì•„í‚¤í…ì²˜ íŒ¨í„´ì„ ë„ì…í•˜ê¸° ì „ì— ê³ ë¯¼í•´ì•¼ í•  ê²ƒ
    1. ì•„í‚¤í…ì²˜ íŒ¨í„´ì´ ì£¼ëŠ” **ì´ìµ**ê³¼ **ë¹„ìš©**ì— ëŒ€í•´ **í™•ì‹¤í•œ ì´ìœ **ê°€ ìˆì–´ì•¼í•©ë‹ˆë‹¤.
    2. í•´ë‹¹í•˜ëŠ” ì•„í‚¤í…ì²˜ íŒ¨í„´ì„ ì±„íƒí–ˆì„ ë•Œ ì–´ë–¤ **ì¥ë‹¨ì **ì´ ì¡´ì¬í•˜ëŠ”ì§€ **ëª…í™•í•˜ê²Œ ì¸ì§€**í•´ì•¼ í•©ë‹ˆë‹¤.
    3. **ì—¬ëŸ¬ ê³„ì¸µ**ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ ë“¤ì´ëŠ” **ë…¸ë ¥**ê³¼ **ì‹œê°„**ì„ íˆ¬ìí•  ë§Œí•œ ê°€ì¹˜ê°€ ìˆì„ ì •ë„ë¡œ **ì–´í”Œë¦¬ì¼€ì´ì…˜**ê³¼ **ë„ë©”ì¸**ì´ **ë³µì¡í•œ** ê²½ìš°ì—ë§Œ ì•„í‚¤í…ì²˜ íŒ¨í„´ì„ **ë„ì…**í•´ì•¼ í•©ë‹ˆë‹¤.

### ê³„ì¸µí˜• ì•„í‚¤í…ì²˜ íŒ¨í„´
- ê³„ì¸µí˜• ì•„í‚¤í…ì²˜ íŒ¨í„´(Layered Architecture Pattern)ì€ ê³„ì¸µì„ ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•˜ëŠ” ì•„í‚¤í…ì²˜ íŒ¨í„´ì´ê³ , í˜„ì¬ ê°€ì¥ í”í•˜ê²Œ ì‚¬ìš©ë˜ê³  ìˆëŠ” ì•„í‚¤í…ì²˜ íŒ¨í„´ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.
**ë‹¨ìˆœ**í•˜ê³  **ëŒ€ì¤‘ì **ì´ë©´ì„œ **ë¹„ìš©ë„ ì ê²Œ** ë“¤ì–´ ëª¨ë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‚¬ì‹¤ìƒ **í‘œì¤€ ì•„í‚¤í…ì²˜**ì…ë‹ˆë‹¤.

ì–´ë–¤ ì•„í‚¤í…ì²˜ íŒ¨í„´ì„ ë„ì…í• ì§€ í™•ì‹ ì´ ì—†ì„ ë•Œì—ëŠ” **ê³„ì¸µí˜• ì•„í‚¤í…ì²˜ íŒ¨í„´**ì€ ì¢‹ì€ ì„ íƒì§€ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê³„ì¸µí˜• ì•„í‚¤í…ì²˜ íŒ¨í„´ì€ ì–´ë–¤ ê²½ìš°ë“  **ê³„ì¸µì„ ë¶„ë¦¬í•´ì„œ ìœ ì§€**í•˜ê³ , **ê° ê³„ì¸µì´ ìì‹ ì˜ ë°”ë¡œ ì•„ë˜ ê³„ì¸µì—ë§Œ ì˜ì¡´**í•˜ê²Œ ë§Œë“œëŠ” ê²ƒì´ **ëª©í‘œ**ì…ë‹ˆë‹¤.

ê³„ì¸µí™”ì˜ í•µì‹¬ì€ ê° ê³„ì¸µì€ ì‘ì§‘ë„(Cohesion)ê°€ ë†’ìœ¼ë©´ì„œ, ë‹¤ë¥¸ ê³„ì¸µê³¼ëŠ” ë‚®ì€ ê²°í•©ë„(Coupling)ë¥¼ ê°€ì§€ê³  ìˆì–´ì•¼í•©ë‹ˆë‹¤.

ì—¬ê¸°ì„œ ìƒìœ„ ê³„ì¸µì€ í•˜ìœ„ ê³„ì¸µì„ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, í•˜ìœ„ ê³„ì¸µì€ ìì‹ ì˜ ìƒìœ„ ê³„ì¸µì— ëˆ„ê°€ ìˆëŠ”ì§€ ì•Œ ìˆ˜ ì—†ê³ , ì‚¬ìš©í•  ìˆ˜ ì¡°ì°¨ ì—†ë„ë¡ êµ¬ì„±í•´ì•¼í•©ë‹ˆë‹¤.

ì¼ë°˜ì ìœ¼ë¡œ ê³„ì¸µí˜• ì•„í‚¤í…ì²˜ íŒ¨í„´ì˜ ê²½ìš° ê·œ**ëª¨ê°€ ì‘ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš° 3ê°œ**, **í¬ê³  ë³µì¡í•œ ê²½ìš°ëŠ” ê·¸ ì´ìƒì˜ ê³„ì¸µìœ¼**ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.

ì €í¬ê°€ ì•Œì•„ë³¼ ì•„í‚¤í…ì²˜ íŒ¨í„´ì€ **3ê³„ì¸µ ì•„í‚¤í…ì²˜(3-Layered Architecture)**ì…ë‹ˆë‹¤.

**3ê³„ì¸µ ì•„í‚¤í…ì²˜**ì—ì„œ êµ¬ì„±ë˜ëŠ” ê°ê°ì˜ **ê³„ì¸µ(Layer)**ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

- **í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ (Presentation Layer)**
- **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ (Business Logic Layer)**
- **ë°ì´í„° ì—‘ì„¸ìŠ¤ ê³„ì¸µ (Data Access Layer) | ì˜ì† ê³„ì¸µ(Persistence Layer)**

[ê·¸ë¦¼ - ì•„í‚¤í…ì²˜ íŒ¨í„´]

- ê³„ì¸µí˜• ì•„í‚¤í…ì²˜ íŒ¨í„´ì˜ ì¥ì 
  ì €í¬ëŠ” ì´ë ‡ê²Œ ê³„ì¸µë³„ë¡œ ì•„í‚¤í…ì²˜ë¥¼ ë¶„ë¦¬í–ˆì„ë•Œ ì•„ë˜ì˜ **ì¥ì **ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - **ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬**í•˜ì—¬ í˜„ì¬ êµ¬í˜„í•˜ë ¤í•˜ëŠ” **ì½”ë“œ**ë¥¼ **ëª…í™•í•˜ê²Œ ì¸ì§€**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ê° ê³„ì¸µë³„ë¡œ ì˜ì¡´ì„±ì´ ë‚®ì•„ **ëª¨ë“ˆ**ì„ **êµì²´**í•˜ë”ë¼ë„ ì½”ë“œ ìˆ˜ì •ì´ **ìš©ì´**í•©ë‹ˆë‹¤.
  - ê° ê³„ì¸µë³„ë¡œ **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆì–´ **í…ŒìŠ¤íŠ¸ ì½”ë“œ**ë¥¼ ì¡°ê¸ˆ ë” **ìš©ì´**í•˜ê²Œ **êµ¬ì„±**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- 3ê³„ì¸µ ì•„í‚¤í…ì²˜ (**3-Layered Architecture**)
    
    **3-Layered Architecture**ëŠ” ì•„ë˜ì˜ 3ê°€ì§€ì˜ ì²˜ë¦¬ê³¼ì •ì„ ì´ìš©í•´ì„œ êµ¬í˜„í•©ë‹ˆë‹¤.
    
    1. **Controller** : ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ê°€ì¥ ë°”ê¹¥ ë¶€ë¶„, ìš”ì²­/ì‘ë‹µì„ ì²˜ë¦¬í•¨.
        - í´ë¼ì´ì–¸íŠ¸ì˜ **ìš”ì²­**ì„ ì²˜ë¦¬ í•œ í›„ ì„œë²„ì—ì„œ ì²˜ë¦¬ëœ **ê²°ê³¼**ë¥¼ **ë°˜í™˜**í•´ì£¼ëŠ” **ì—­í• **ì„ í•©ë‹ˆë‹¤.
    2. **Service** : ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¤‘ê°„ ë¶€ë¶„, ì‹¤ì œ ì¤‘ìš”í•œ ì‘ë™ì´ ë§ì´ ì¼ì–´ë‚˜ëŠ” ë¶€ë¶„
        - ì•„í‚¤í…ì²˜ì˜ ê°€ì¥ í•µì‹¬ì ì¸ **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**ì´ ìˆ˜í–‰ë˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
    3. **Repository** : ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ê°€ì¥ ì•ˆìª½ ë¶€ë¶„, DBì™€ ë§ë‹¿ì•„ ìˆìŒ.
        - ì‹¤ì œ **ë°ì´í„°ë² ì´ìŠ¤**ì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê³„ì¸µì…ë‹ˆë‹¤.

**3-Layered Architecture**ì—ì„œëŠ” ì•„ë˜ì˜ **í”Œë¡œìš°**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¡œì§ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤.

1. **í´ë¼ì´ì–¸íŠ¸(Client)**ê°€ **ìš”ì²­(Request)**ì„ ë³´ëƒ…ë‹ˆë‹¤.
2. **ìš”ì²­(Request)**ì„ URLì— ì•Œë§ì€ **ì»¨íŠ¸ë¡¤ëŸ¬**(**Controller)**ê°€ ìˆ˜ì‹  ë°›ìŠµë‹ˆë‹¤.
3. **ì»¨íŠ¸ë¡¤ëŸ¬**(**Controller)**ëŠ” ë„˜ì–´ì˜¨ **ìš”ì²­**ì„ **ì²˜ë¦¬**í•˜ê¸° ìœ„í•´ **ì„œë¹„ìŠ¤(Service)**ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
4. **ì„œë¹„ìŠ¤(Service)**ëŠ” í•„ìš”í•œ **ë°ì´í„°**ë¥¼ ê°€ì ¸ì˜¤ê¸°ìœ„í•´ ì €**ì¥ì†Œ(Repository)**ì—ê²Œ **ë°ì´í„°**ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.
5. **ì„œë¹„ìŠ¤(Service)**ëŠ” **ì €ì¥ì†Œ(Repository)**ì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ **ê°€ê³µ**í•˜ì—¬ **ì»¨íŠ¸ë¡¤ëŸ¬**(**Controller)**ì—ê²Œ **ë°ì´í„°**ë¥¼ ë„˜ê¹ë‹ˆë‹¤.
6. **ì»¨íŠ¸ë¡¤ëŸ¬**(**Controller)**ëŠ” **ì„œë¹„ìŠ¤(Service)**ì˜ **ê²°ê³¼ë¬¼(Response)**ì„ **í´ë¼ì´ì–¸íŠ¸(Client)**ì—ê²Œ ì „ë‹¬í•´ì¤ë‹ˆë‹¤.

- ğŸ‘‰ ì„œë²„ ê°œë°œìë“¤ì€ ì„œë²„ì—ì„œì˜ ì²˜ë¦¬ê³¼ì •ì´ ëŒ€ë¶€ë¶„ ë¹„ìŠ·í•˜ë‹¤ëŠ” ê±¸ ê¹¨ë‹«ê³ , ì²˜ë¦¬ ê³¼ì •ì„ í¬ê²Œ 3ê°œë¡œ ë¶„ë¦¬í•˜ì˜€ê³  **Controller, Service, Repository** ì…ë‹ˆë‹¤. ê° ì—­í•  ë³„ë¡œ í•˜ëŠ” ì¼ì„ ì •ë¦¬í•´ ë³´ê² ìŠµë‹ˆë‹¤.

`Controller`

[ê·¸ë¦¼ - ì»¨íŠ¸ë¡¤ëŸ¬]

- í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë°›ìŒ
- ìš”ì²­ì— ëŒ€í•œ ì²˜ë¦¬ëŠ” ì„œë¹„ìŠ¤ì—ê²Œ ì „ë‹´
- í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µ

`Service`

[ê·¸ë¦¼ - ì„œë¹„ìŠ¤]

- ì‚¬ìš©ìì˜ ìš”êµ¬ì‚¬í•­ì„ ì²˜ë¦¬ ('ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§') í•˜ëŠ” **ì‹¤ì„¸!**
    - í˜„ì—…ì—ì„œëŠ” ì„œë¹„ìŠ¤ ì½”ë“œê°€ ê³„ì† ë¹„ëŒ€í•´ì§
- DB ì •ë³´ê°€ í•„ìš”í•  ë•ŒëŠ” Repository ì—ê²Œ ìš”ì²­

`Repository`

[ê·¸ë¦¼ - ë¦¬í¬ì§€í† ë¦¬]

- DB ê´€ë¦¬ (ì—°ê²°, í•´ì œ, ìì› ê´€ë¦¬)
- DB CRUD ì‘ì—… ì²˜ë¦¬

ìµœì¢…ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ê·¸ë¦¼ì´ ë©ë‹ˆë‹¤.

[ê·¸ë¦¼ - ì „ì²´ ê·¸ë¦¼]

### êµ¬í˜„

### ì»¨íŠ¸ë¡¤ëŸ¬ (Controller)
- ì»¨íŠ¸ë¡¤ëŸ¬(Controller)ë€ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ì²˜ë¦¬ í•œ í›„ ì„œë²„ì—ì„œ ì²˜ë¦¬ëœ ê²°ê³¼ë¥¼ ë°˜í™˜í•´ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

**ì»¨íŠ¸ë¡¤ëŸ¬(Controller)**ëŠ” ì¶”ê°€ì ìœ¼ë¡œ ì•„ë˜ì˜ ì—­í• ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

- **í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­(Request)ì„ ìˆ˜ì‹ í•©ë‹ˆë‹¤.**
- **ìš”ì²­(Request)ì— ë“¤ì–´ì˜¨ ë°ì´í„° ë° ë‚´ìš©ì„ ê²€ì¦í•©ë‹ˆë‹¤.**
- **ì„œë²„ì—ì„œ ìˆ˜í–‰ëœ ê²°ê³¼ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°˜í™˜(Response)í•©ë‹ˆë‹¤.**

#### í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ(Presentation Layer) ì´ë€?
- 3ê³„ì¸µ ì•„í‚¤í…ì²˜ íŒ¨í„´ì—ì„œëŠ” í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ(Presentation Layer)ì´ë¼ê³  í‘œí˜„ë˜ë©°, ëŒ€í‘œì ìœ¼ë¡œëŠ” ì»¨íŠ¸ë¡¤ëŸ¬(Controller)ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì‚¬ìš©ì(í´ë¼ì´ì–¸íŠ¸)ê°€ ì„œë²„ì— ìš”ì²­(Request)ë¥¼ í•˜ê²Œë˜ë©´ ê°€ì¥ ë¨¼ì € ë§Œë‚˜ê²Œ ë˜ëŠ” ê³„ì¸µì…ë‹ˆë‹¤.

- **í•˜ìœ„ ê³„ì¸µ(ì„œë¹„ìŠ¤ ê³„ì¸µ, ì €ì¥ì†Œ ê³„ì¸µ)**ì—ì„œ ë°œìƒí•˜ëŠ” **ì˜ˆì™¸(Exception)**ë¥¼  ì²˜ë¦¬ í•©ë‹ˆë‹¤.
- í´ë¼ì´ì–¸íŠ¸ê°€ ì „ë‹¬í•œ ë°ì´í„°ì— ëŒ€í•´ **ìœ íš¨ì„±ì„ ê²€ì¦**í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- í´ë¼ì´ì–¸íŠ¸ì˜ **ìš”ì²­**ì„ ì²˜ë¦¬í•œ í›„ ì„œë²„ì—ì„œ ì²˜ë¦¬ëœ ê²°ê³¼ë¥¼ **ë°˜í™˜**í•©ë‹ˆë‹¤.

#### Expressë¡œ êµ¬í˜„í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬

[ê·¸ë¦¼ - ì»¨íŠ¸ë¡¤ëŸ¬]

- í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë°›ìŒ
- ìš”ì²­ì— ëŒ€í•œ ì²˜ë¦¬ëŠ” ì„œë¹„ìŠ¤ì—ê²Œ ì „ë‹´
- í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µ

ìœ„ì—ì„œ ë°°ìš´ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬(Controller)ë¥¼ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤. í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ê¸° ì „ 3ê³„ì¸µ ì•„í‚¤í…ì²˜ í”„ë¡œì íŠ¸ì—ì„œ ì–´ë–¤ APIë¥¼ ë§Œë“¤ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.

Expressì—ì„œëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë¼ìš°í„°ë¥¼ ì—°ê²°í•˜ê¸° ìœ„í•´ì„œ express.Routerì—ì„œ íŠ¹ì • URIì™€ HTTP Methodë¥¼ ìš”ì²­ë°›ì•˜ì„ ë•Œ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ìš”ì²­ëœ ë‚´ìš©ì„ ì „ë‹¬ í•´ì¤˜ì•¼í•©ë‹ˆë‹¤.

routes í´ë”ì—ì„œ posts.routes.js ë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ì–´ PostsConrtollerì™€ ì—°ê²°í•˜ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.

```js
// routes/posts.routes.js
const express = require('express');
const router = express.Router();

// ì»¨íŠ¸ë¡¤ëŸ¬ ëª¨ë“ˆì„ ê°€ì ¸ì˜¨ë‹¤.
const PostsController = require('../controllers/posts.controller');
// ì»¨íŠ¸ë¡¤ëŸ¬ ëª¨ë“ˆì„ ìƒì„±í•œë‹¤.
const postsController = new PostsController();

// get ë©”ì†Œë“œë¡œ ìš”ì²­ì´ ì˜¨ ê²½ìš° í¬ìŠ¤íŠ¸ë“¤ì„ ë³´ë‚´ì¤€ë‹¤.
// post ë©”ì†Œë“œë¡œ ìš”ì²­ì´ ì˜¨ ê²½ìš° í¬ìŠ¤íŠ¸ë¥¼ ìƒì„±í•œë‹¤.
router.get('/', postsController.getPosts);
router.post('/', postsController.createPost);

module.exports = router;
```

```js
// controllers/posts.controller.js

const PostService = require('../services/posts.service');

// Postì˜ ì»¨íŠ¸ë¡¤ëŸ¬(Controller)ì—­í• ì„ í•˜ëŠ” í´ë˜ìŠ¤
class PostsController {
  postService = new PostService(); // Post ì„œë¹„ìŠ¤ë¥¼ í´ë˜ìŠ¤ë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì˜ ë©¤ë²„ ë³€ìˆ˜ë¡œ í• ë‹¹í•©ë‹ˆë‹¤.

  getPosts = async (req, res, next) => {
    // ì„œë¹„ìŠ¤ ê³„ì¸µì— êµ¬í˜„ëœ findAllPost ë¡œì§ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
    const posts = await this.postService.findAllPost();

    res.status(200).json({ data: posts })
  }

  createPost = async (req, res, next) => {
    const { nickname, password, title, content } = req.body;

    // ì„œë¹„ìŠ¤ ê³„ì¸µì— êµ¬í˜„ëœ createPost ë¡œì§ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
    const createPostData = await this.postService.createPost(nickname, password, title, content);

    res.status(201).json({ data: createPostData });
  }
}

module.exports = PostsController;
```

`await this.postService.findAllPost();` ëŠ” `PostsController` í´ë˜ìŠ¤ì—ì„œ ë©¤ë²„ ë³€ìˆ˜ë¡œ ì •ì˜í•œ `postService`ì—ì„œ `findAllPost` ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤.

ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” **í•˜ìœ„ ê³„ì¸µ**ì´ ì–´ë– í•œ **ë‚´ë¶€ êµ¬ì¡°**ë¥¼ ê°€ì§€ê³  ìˆëŠ”ì§€ ì‹ ê²½ì“°ì§€ ì•Šê³ , **ì™¸ë¶€**ì— ë“œëŸ¬ë‚˜ ìˆëŠ” **ë©”ì†Œë“œ**ë¥¼ **í˜¸ì¶œ**í•˜ê¸°ë§Œ í•©ë‹ˆë‹¤. ì´ê²ƒì´ ê°€ëŠ¥í•œ ì´ìœ ëŠ” **ì¶”ìƒí™”(Absctraction)**ì˜ íŠ¹ì„± ë•ë¶„ì…ë‹ˆë‹¤.

`PostsController`ì—ì„œëŠ” ë“¤ì–´ì˜¨ ìš”ì²­(Request)ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ `PostService`ë¥¼ í˜¸ì¶œí•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ **ì»¨íŠ¸ë¡¤ëŸ¬**ì—ì„œ **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**ì„ ìˆ˜í–‰í•˜ì§€ ì•Šê³ , **í´ë¼ì´ì–¸íŠ¸**ì˜ **ìš”ì²­(Request)**ì„ ë°”ë¡œ **ì„œë¹„ìŠ¤ ê³„ì¸µ**ìœ¼ë¡œ ì „ë‹¬ í•˜ë„ë¡ êµ¬í˜„í•œ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

PostControllerì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­(Request)ì„ ì„œë¹„ìŠ¤ ê³„ì¸µìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œ ì–´ë– í•œ ë‚´ë¶€ êµ¬ì¡°ë¥¼ í†µí•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì¸ì§€ ìƒìœ„ ê³„ì¸µì¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ê²ŒëŠ” ì¤‘ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

#### Expressë¡œ êµ¬í˜„í•˜ëŠ” ì„œë¹„ìŠ¤
- ì„œë¹„ìŠ¤ ê³„ì¸µ(Service Layer)ì´ë€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ(Business logic layer)ì´ë¼ê³ ë„ ë¶ˆë¦¬ëŠ”ë°ìš” ì•„í‚¤í…ì²˜ì˜ ê°€ì¥ í•µì‹¬ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰í•˜ê³  ì‹¤ì œ ì‚¬ìš©ì(í´ë¼ì´ì–¸íŠ¸)ê°€ ì›í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì„ êµ¬í˜„í•˜ëŠ” ê³„ì¸µì…ë‹ˆë‹¤.

- **í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ(Presentation Layer)**ê³¼ **ë°ì´í„° ì—‘ì„¸ìŠ¤ ê³„ì¸µ(Data Access Layer)** ì‚¬ì´ì—ì„œ ì¤‘ê°„ **ë‹¤ë¦¬ ì—­í• **ì„ í•˜ë©° ì„œë¡œ ë‹¤ë¥¸ ë‘ ê³„ì¸µì´ **ì§ì ‘ í†µì‹ **í•˜ì§€ **ì•Šê²Œ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.**
- **ì„œë¹„ìŠ¤(Service)**ëŠ” **ë°ì´í„°**ê°€ í•„ìš”í•  ë•Œ **ì €ì¥ì†Œ(Repository)**ì—ê²Œ **ë°ì´í„°**ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.
- ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ **ê·œëª¨**ê°€ ì»¤ì§€ë©´ ì»¤ì§ˆìˆ˜ë¡ ì„œë¹„ìŠ¤ì˜ **ì—­í• ** ë° **ì½”ë“œ**ë˜í•œ ì ì  ë” **ì»¤ì§€ê²Œ ë©ë‹ˆë‹¤.**
- ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ **í•µì‹¬ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰**í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ë“¤ì˜ **ìš”êµ¬ì‚¬í•­ì„ ë°˜ì˜**í•˜ì—¬ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ **ë°˜í™˜**í•´ì£¼ëŠ” ê³„ì¸µì…ë‹ˆë‹¤.

**ì„œë¹„ìŠ¤ ê³„ì¸µì˜ ì¥ì **

ê°ê°ì˜ **ìœ ìŠ¤ ì¼€ì´ìŠ¤(Use Case)**ì™€ **ì›Œí¬í”Œë¡œìš°(Workflow)**ë¥¼ ëª…í™•íˆ ì •ì˜í•  ë•Œ ë„ì›€ì´ ë©ë‹ˆë‹¤.

- **ì €ì¥ì†Œ(Repository)**ì—ê²Œ ì–»ì„ í•„ìš”ê°€ ìˆëŠ” **ë°ì´í„°**ê°€ ë¬´ì—‡ì¸ì§€ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì–´ë–¤ **ì‚¬ì „ ê²€ì‚¬**ì™€ **í˜„ì¬ ìƒíƒœ ê²€ì¦**ì„ í•„ìˆ˜ì ìœ¼ë¡œ í•´ì•¼í•˜ëŠ” ê²ƒì¸ì§€ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì–´ë–¤ **ë‚´ìš©ì„ ì €ì¥**í•´ì•¼ í•˜ëŠ”ì§€ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

â†’ [ìœ ìŠ¤ ì¼€ì´ìŠ¤(Use Case)ì— ëŒ€í•´ ìì„¸íˆ ì•Œê³  ì‹¶ë‹¤ë©´ ì—¬ê¸°ë¥¼ í´ë¦­í•˜ì„¸ìš”!](https://en.wikipedia.org/wiki/Use_case)

- **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**ì„ API ë’¤ì— ê°ì·„ê¸° ë•Œë¬¸ì— ì„œë¹„ìŠ¤ ê³„ì¸µì˜ ì½”ë“œë¥¼ **ììœ ë¡­ê²Œ ë¦¬íŒ©í„°ë§**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ì €ì¥ì†Œ íŒ¨í„´(Repository Pattern)** ë° **ê°€ì§œ ì €ì¥ì†Œ(Fake Repository)**ì™€ ì¡°í•©í•˜ë©´ **ë†’ì€ ìˆ˜ì¤€**ì˜ **í…ŒìŠ¤íŠ¸**ë¥¼ **ì‘ì„±**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì„œë¹„ìŠ¤ ê³„ì¸µì˜ ë‹¨ì **

- **ì„œë¹„ìŠ¤ ê³„ì¸µ**ë˜í•œ ë‹¤ë¥¸ **ì¶”ìƒí™” ê³„ì¸µ**ì— ë¶ˆê³¼í•©ë‹ˆë‹¤.
- **ì„œë¹„ìŠ¤ ê³„ì¸µ**ì— ë„ˆë¬´ ë§ì€ ê¸°ëŠ¥ì„ ë„£ìœ¼ë©´ **ë¹ˆì•½í•œ ë„ë©”ì¸ ëª¨ë¸(Anemic Domain Model)**ê³¼ ê°™ì€ **ì•ˆí‹° íŒ¨í„´**ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

##### êµ¬í˜„
`Service`

[ê·¸ë¦¼ - ì„œë¹„ìŠ¤]

- ì‚¬ìš©ìì˜ ìš”êµ¬ì‚¬í•­ì„ ì²˜ë¦¬ ('ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§') í•˜ëŠ” **ì‹¤ì„¸!**
    - í˜„ì—…ì—ì„œëŠ” ì„œë¹„ìŠ¤ ì½”ë“œê°€ ê³„ì† ë¹„ëŒ€í•´ì§
- DB ì •ë³´ê°€ í•„ìš”í•  ë•ŒëŠ” Repository ì—ê²Œ ìš”ì²­

ìš°ë¦¬ëŠ” ì´ì „ì— `PostsController`ê°€ `PostService`ì—ê²Œ **í´ë¼ì´ì–¸íŠ¸**ì˜ **ìš”ì²­(Request)**ì„ ì „ë‹¬í•˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.

ì´ë²ˆ **ì„œë¹„ìŠ¤ ê³„ì¸µ(Service Layer)**ì—ì„œëŠ” **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**ì˜ ìˆ˜í–‰ ë°©ë²•ê³¼ **ì €ì¥ì†Œ(Repository)**ì—ê²Œ **ë°ì´í„°**ë¥¼ ì–´ë–¤ë°©ì‹ìœ¼ë¡œ **ìš”ì²­**í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

```js
// services/posts.service.js

const PostRepository = require('../repositories/posts.repository');

class PostService {
  postRepository = new PostRepository();

  findAllPost = async () => {
    // ì €ì¥ì†Œ(Repository)ì—ê²Œ ë°ì´í„°ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.
    const allPost = await this.postRepository.findAllPost();

    // í˜¸ì¶œí•œ Postë“¤ì„ ê°€ì¥ ìµœì‹  ê²Œì‹œê¸€ ë¶€í„° ì •ë ¬í•©ë‹ˆë‹¤.
    // ì˜¤ë¦„ì°¨ìˆœ
    allPost.sort((a, b) => {
      return b.createdAt - a.createdAt;
    })

    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰í•œ í›„ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ë°ì´í„°ë¥¼ ê°€ê³µí•©ë‹ˆë‹¤.
    return allPost.map(post => {
      return {
        postId: post.postId,
        nickname: post.nickname,
        title: post.title,
        createdAt: post.createdAt,
        updatedAt: post.updatedAt
      }
    });
  }

  createPost = async (nickname, password, title, content) => {
    // ì €ì¥ì†Œ(Repository)ì—ê²Œ ë°ì´í„°ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.
    const createPostData = await this.postRepository.createPost(nickname, password, title, content);

    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰í•œ í›„ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ë°ì´í„°ë¥¼ ê°€ê³µí•©ë‹ˆë‹¤.
    return {
      postId: createPostData.null,
      nickname: createPostData.nickname,
      title: createPostData.title,
      content: createPostData.content,
      createdAt: createPostData.createdAt,
      updatedAt: createPostData.updatedAt,
    };
  }
}

module.exports = PostService;
```

ì´ë²ˆ **ì„œë¹„ìŠ¤ ê³„ì¸µ(Service Layer)**ì—ì„œëŠ” `PostService`ê°€ `PostRepository`ì˜ `findAllPost, createPost` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ ì½”ë“œëŠ” **ì„œë¹„ìŠ¤**ê°€ **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ í•„ìš”í•œ **ë°ì´í„°**ë¥¼ **ì €ì¥ì†Œ ê³„ì¸µ(Repository Layer)**ì—ê²Œ **ìš”ì²­**í•˜ì—¬ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ë¦¬ê³  **ì„œë¹„ìŠ¤**ì—ì„œ íŠ¹ë³„í•œ ì ì€ `return allPost.map(post => {});` ì™€ ê°™ì´ **ë°ì´í„°ë¥¼ ê°€ê³µ**í•˜ëŠ” ì½”ë“œì¸ë°ìš”, ë§Œì•½ **Repository**ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ê°€ê³µí•˜ì§€ ì•Šê³  **í´ë¼ì´ì–¸íŠ¸**ì—ê²Œ **ì „ë‹¬**í•  ê²½ìš° ì‚¬ìš©ìì˜ **Password**ê°™ì´ ì•Œì•„ì„œëŠ” ì•ˆë  ì •ë³´ê¹Œì§€ ì „ë‹¬ë˜ê²Œ ë˜ì–´ ë³´ì•ˆì„±ì´ ë–¨ì–´ì§€ëŠ” ê²°ê³¼ë¥¼ ë‚³ê²Œë©ë‹ˆë‹¤.

#### Expressë¡œ êµ¬í˜„í•˜ëŠ” ì €ì¥ì†Œ
- ì €ì¥ì†Œ ê³„ì¸µ(Repository Layer)ì´ë€ ë°ì´í„° ì—‘ì„¸ìŠ¤ ê³„ì¸µ(Data Access Layer)ì´ë¼ê³ ë„ ë¶ˆë¦¬ëŠ”ë°ìš” ëŒ€í‘œì ìœ¼ë¡œ Databaseì™€ ê´€ë ¨ëœ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê³„ì¸µì…ë‹ˆë‹¤.

- **ëª¨ë“  ë°ì´í„°**ê°€ **Memoryìƒì— ì¡´ì¬í•˜ëŠ” ê²ƒì²˜ëŸ¼** ê°€ì •í•´ **ë°ì´í„° ì ‘ê·¼**ê³¼ ê´€ë ¨ëœ **ì„¸ë¶€ ì‚¬í•­**ì„ **ê°ì¶¥ë‹ˆë‹¤**
- ëŒ€í‘œì ì¸ ì €ì¥ì†Œ ê³„ì¸µì˜ ë©”ì†Œë“œ
    - **add()** : ìƒˆ ì›ì†Œë¥¼ ì €ì¥ì†Œì— **ì¶”ê°€í•©ë‹ˆë‹¤.**
    - **get()** : ì´ì „ì— ì¶”ê°€í•œ ì›ì†Œë¥¼ ì €ì¥ì†Œì—ì„œ **ê°€ì ¸ì˜µë‹ˆë‹¤.**
- ì €ì¥ì†Œ ê³„ì¸µì„ êµ¬í˜„í–ˆì„ ë•Œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë°©ë²•ì„ ë” **ì‰½ê²Œ ë³€ê²½**í•  ìˆ˜ ìˆê³ , í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì‹œ **ê°€ì§œ ì €ì¥ì†Œ(Mock Repository)**ë¥¼ ì œê³µí•˜ê¸°ê°€ ë” ì‰¬ì›Œì§‘ë‹ˆë‹¤.
- ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ **ë‹¤ë¥¸ ê³„ì¸µ**ì—ì„œëŠ” ì €ì¥ì†Œì˜ **ì„¸ë¶€ ì‚¬í•­**ì´ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆë”ë¼ë„ **ì˜í–¥ì„ ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤.**
â†’ **ê°ì²´ ì§€í–¥ì˜ ê°œë… ì¤‘ì—ì„œ ì¶”ìƒí™”(Abstraction)ì™€ ê´€ê³„ê°€ ìˆìŠµë‹ˆë‹¤.**

- **ì €ì¥ì†Œ ê³„ì¸µ**ì€ ë°ì´í„° ì €ì¥ì†Œë¥¼ ê°„ë‹¨íˆ **ì¶”ìƒí™”**í•œ ê²ƒìœ¼ë¡œ ì´ íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ **ëª¨ë¸ ê³„ì¸µ**ê³¼ **ë°ì´í„° ê³„ì¸µ**ì„ **ë¶„ë¦¬**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

##### ì¥ì 
- **ëª¨ë¸**ê³¼ **ì¸í”„ë¼**ì— ëŒ€í•œ ì‚¬í•­ì„ ì™„ì „íˆ ë¶„ë¦¬í–ˆê¸° ë•Œë¬¸ì— **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸(Unit test)**ë¥¼ ìœ„í•œ **ê°€ì§œ ì €ì¥ì†Œ(Fake Repository)**ë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ë„ë©”ì¸ ëª¨ë¸**ì„ ë¯¸ë¦¬ ì‘ì„±í•˜ë©´ ì²˜ë¦¬í•´ì•¼ í•  **ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸ì œ**ì— ë” ì˜ **ì§‘ì¤‘**í•  ìˆ˜ ìˆë‹¤.
- **ì ‘ê·¼ ë°©ì‹**ì„ ë°”ê¾¸ê³  ì‹¶ì„ ë•Œ **ì™¸ë˜í‚¤**ë‚˜ **ë§ˆì´ê·¸ë ˆì´ì…˜** ë“±ì„ ì—¼ë ¤í•˜ì§€ ì•Šê³  **ëª¨ë¸ì— ë°˜ì˜**í•  ìˆ˜ ìˆë‹¤.
- **ê°ì²´**ë¥¼ **í…Œì´ë¸”**ì— **ë§¤í•‘**í•˜ëŠ” ê³¼ì •ì„ ì›í•˜ëŠ” ëŒ€ë¡œ **ì œì–´**í•  ìˆ˜ ìˆì–´ì„œ **DB ìŠ¤í‚¤ë§ˆ**ë¥¼ **ë‹¨ìˆœí™”**í•  ìˆ˜ ìˆë‹¤.
- **ì €ì¥ì†Œ ê³„ì¸µ**ì— ORMì„ ì‚¬ìš©í•˜ë©´ í•„ìš”í•  ë•Œ **MySQL**ê³¼ **Postgres**ì™€ ê°™ì´ DBë¥¼ ì„œë¡œ ë°”ê¾¸ê¸° ì‰¬ì›Œì§‘ë‹ˆë‹¤.

##### ë‹¨ì 
- ì €ì¥ì†Œ ê³„ì¸µì´ ì—†ë”ë¼ë„ **ORM**ì´ ì–´ëŠ ì •ë„ (**ëª¨ë¸**ê³¼ **ì €ì¥ì†Œ**ì˜) **ê²°í•©ì„ ì™„í™”**ì‹œì¼œì¤ë‹ˆë‹¤.
- **ORM ë§¤í•‘**ì„ **ìˆ˜ë™**ìœ¼ë¡œ í•˜ë ¤ë©´ **ê°œë°œ ì½”ìŠ¤íŠ¸**ê°€ ë”ìš± ì†Œëª¨ë©ë‹ˆë‹¤.
    
    â†’ ì—¬ê¸°ì„œ ì„¤ëª…í•˜ëŠ” **ORM**ì€ ì €í¬ê°€ ì´ì „ì— ì‚¬ìš©í•œ **Sequelize**ì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§í•©ë‹ˆë‹¤.

##### êµ¬í˜„

[ê·¸ë¦¼ - ë¦¬í¬ì§€í† ë¦¬]

- DB ê´€ë¦¬ (ì—°ê²°, í•´ì œ, ìì› ê´€ë¦¬)
- DB CRUD ì‘ì—… ì²˜ë¦¬

3ê³„ì¸µ ì•„í‚¤í…ì²˜ì˜ ë§ˆì§€ë§‰ ê³„ì¸µì¸ **ì €ì¥ì†Œ ê³„ì¸µ(Repository Layer)**ì…ë‹ˆë‹¤!

ì´ì „ ì½”ë“œì—ì„œ **ì„œë¹„ìŠ¤ ê³„ì¸µ(Service Layer)**ì¸ `PostServices`ì—ì„œ `PostRepository`ë¥¼ í˜¸ì¶œí•˜ì—¬ **ë°ì´í„°**ë¥¼ **ìš”ì²­**í•˜ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆì—ˆëŠ”ë°ìš”, **ì €ì¥ì†Œ ê³„ì¸µ(Repository Layer)**ì—ì„œëŠ” **ë°ì´í„°ë² ì´ìŠ¤**ì˜ **ë°ì´í„°**ë¥¼ ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ ê°€ì ¸ì™€ **ìƒìœ„ ê³„ì¸µ**ì—ê²Œ **ë°˜í™˜**í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

```js
// repositories/posts.repository.js

const { Posts } = require('../models');

class PostRepository {
  findAllPost = async () => {
    // ORMì¸ Sequelizeì—ì„œ Posts ëª¨ë¸ì˜ findAll ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.
    const posts = await Posts.findAll();

    return posts;
  }

  createPost = async (nickname, password, title, content) => {
    // ORMì¸ Sequelizeì—ì„œ Posts ëª¨ë¸ì˜ create ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.
    const createPostData = await Posts.create({ nickname, password, title, content });

    return createPostData;
  }
}

module.exports = PostRepository;
```